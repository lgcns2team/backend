-- 전투 이동 경로 업데이트 (GeoJSON 데이터)

-- 처인성 전투 markerRoute 업데이트
UPDATE battle 
SET markerRoute = '{"type":"LineString","coordinates":[[127.20274993936692,37.15092143813358],[127.19834015653862,37.14652999816638],[127.18952046754387,37.13774612647956],[127.18511056972738,37.13335369475361],[127.18070055866182,37.12896101078576],[127.17189043327137,37.12017465099815],[127.16748030889677,37.11578097925738]]}'::jsonb
WHERE battle_name = '처인성 전투';

-- 충주성 전투 markerRoute 업데이트  
UPDATE battle
SET markerRoute = '{"type":"LineString","coordinates":[[127.92965696609333,36.993124123722154],[127.92524745720366,36.988736241010756],[127.92083747038548,36.98434810516606],[127.9120163932068,36.97118217894397],[127.90760529346727,36.96679303067773],[127.90319371579938,36.96240362933399],[127.89437016373533,36.9536240674587]]}'::jsonb
WHERE battle_name = '충주성 전투';

-- 삼별초의 항쟁 markerRoute 업데이트
UPDATE battle
SET markerRoute = '{"type":"MultiLineString","coordinates":[[[126.55431677253789,36.50200008270571],[126.54985828549237,35.89777528838701],[126.54539966925606,35.88642814831564]],[[126.54985828549237,35.89777528838701],[126.43377431038988,36.37861745129442]]]}'::jsonb
WHERE battle_name = '삼별초의 항쟁';

-- 합천 전투 추가 (새로운 전투 데이터)
INSERT INTO battle (
    battle_name, details, latitude, longitude,
    winner_general, loser_general, battle_date, war_id, markerRoute
) VALUES (
    '합천 전투',
    '여몽연합군이 삼별초를 추격하며 합천 일대에서 벌인 전투.',
    35.56, 128.16,
    '여몽연합군', '삼별초',
    DATE '1270-08-01',
    (SELECT war_id FROM war WHERE name = '여몽전쟁(대몽항쟁)'),
    '{"type":"LineString","coordinates":[[128.15836089632858,36.98907989570739],[128.15395096718336,36.97591478828823],[128.14953056015974,36.971525912932236],[128.14511017526892,36.96494212535888],[128.1406898125119,36.95835776837174]]}'::jsonb
);
