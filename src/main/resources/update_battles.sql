-- 전투 이동 경로 업데이트 (GeoJSON 데이터)
-- 여몽전쟁 관련 전투 경로 데이터

-- 1. 충주성 전투 - "시작->충주" 경로
UPDATE battle 
SET marker_route = '{"type":"LineString","coordinates":[[116.4434081890688,39.94218722163645],[116.98158531384907,40.17764571648192],[117.5856616783983,40.40392386108535],[118.34350293574191,40.70444861769766],[119.41985718530238,41.01191454804087],[120.16671523601778,41.25190306998128],[121.18815345243742,41.40866072110334],[121.88009547001201,41.301446232520604],[122.55007107433025,41.06992318180993],[123.34086195155832,40.687788193445755],[123.8460894564541,40.42065505924966],[124.3513169613498,40.194433037029],[124.86752767287369,39.97587395685135],[125.24649662974015,39.970656108973344],[125.40809196235618,39.79555694217953],[125.58931487172097,39.60535467072512],[125.65798722624427,39.33608321069638],[125.73212387098441,39.0166860331456],[125.96753394397979,38.65906373277221],[126.14875685334454,38.418432229207674],[126.31717081561534,38.1860100747619],[126.56703876640614,37.96979090534073],[126.77491685487175,37.75425931961121],[126.90808823523828,37.630367254274155],[126.96995812536858,37.55530745539255],[127.3750863885329,37.47235501756306],[127.58102151281106,37.42656147724717],[127.91077874682867,37.33723935461309],[127.91764325097128,37.18311583317315],[127.9258806559424,37.07032993343902],[127.92999935842796,36.969447095990915]]}'::jsonb
WHERE battle_name = '충주성 전투';

-- 2. 처인성 전투 - "남경 -> 처인" 경로
UPDATE battle
SET marker_route = '{"type":"LineString","coordinates":[[126.972839,37.556397],[127.192503,37.151373]]}'::jsonb
WHERE battle_name = '처인성 전투';

-- 3. 죽주성 전투 - "처인 -> 죽주" 경로
UPDATE battle
SET marker_route = '{"type":"LineString","coordinates":[[127.18158,37.151381],[127.425956,37.079099]]}'::jsonb
WHERE battle_name = '죽주성 전투';

-- 4. 삼별초의 항쟁 - "삼별초 강화 용장 탐라" 경로
UPDATE battle
SET marker_route = '{"type":"LineString","coordinates":[[126.49043803509805,37.75301985688926],[126.3229558396316,37.422181191537085],[126.1829199551225,37.203719676396275],[126.08956269878304,37.043842242882484],[125.97698483084432,36.89680844603381],[125.957764219245,36.77589692331659],[126.00718864907178,36.64818330043741],[126.06160134084848,36.19468167138441],[126.10600161151172,35.676998294908444],[126.12796802476807,35.446847706786436],[126.16091764465256,35.26090623896035],[126.21525385975687,34.93016418990741],[126.22301150218051,34.732399425914565],[126.25733402289356,34.48371632695861],[126.31411520539773,34.042692105404804],[126.46248370053135,33.46734790403028]]}'::jsonb
WHERE battle_name = '삼별초의 항쟁';

-- 5. 추가 전투: 서경 전투 (서경 -> 수안)
INSERT INTO battle (
    battle_name, details, latitude, longitude,
    winner_general, loser_general, battle_date, war_id, marker_route
) VALUES (
    '서경 전투',
    '몽골군의 서경 침공과 수안 지역 공략.',
    39.03, 125.73,
    '몽골 장수', '고려 수비군',
    DATE '1235-01-01',
    (SELECT war_id FROM war WHERE name = '여몽전쟁(대몽항쟁)'),
    '{"type":"LineString","coordinates":[[125.73210826350027,39.027027092844044],[126.22446556192669,38.9047656135917],[126.55533466160024,38.82135329131317],[126.74581631818396,38.73445411156535],[126.72934150824172,38.45536806318615],[126.72384990492763,38.25289208075275],[126.85839418612265,38.110389993841416],[127.14395755845503,38.16008145063781],[127.17141557502549,38.36712369324218],[127.14121175679799,38.582164659695714]]}'::jsonb
) ON CONFLICT DO NOTHING;

-- 6. 추가 전투: 처인 남하 전투 (처인 직산 공주 전주 나주)
INSERT INTO battle (
    battle_name, details, latitude, longitude,
    winner_general, loser_general, battle_date, war_id, marker_route
) VALUES (
    '처인 남하 전투',
    '몽골군이 처인성 이후 직산, 공주, 전주, 나주로 남하한 공세.',
    36.84, 127.13,
    '몽골 장수', '고려 수비군',
    DATE '1233-01-01',
    (SELECT war_id FROM war WHERE name = '여몽전쟁(대몽항쟁)'),
    '{"type":"LineString","coordinates":[[127.18561397839679,37.14920858653248],[127.16227466431192,37.005669117947626],[127.13309062758388,36.83969776065662],[127.1221074209557,36.654818107394],[127.11834495929607,36.53041468449043],[127.12109544319839,36.4652895174036],[127.12487663383898,36.27047393962188],[127.14958884875236,36.117520623134105],[127.14694995836182,35.9820471522741],[127.15273420200388,35.825417217323974],[127.05641029810654,35.54754697754938],[126.97403624839528,35.301334191303546],[126.72965990091856,35.034130604052784]]}'::jsonb
) ON CONFLICT DO NOTHING;

-- 7. 추가 전투: 죽주 남하 전투 (죽주 청주 대구 경주)
INSERT INTO battle (
    battle_name, details, latitude, longitude,
    winner_general, loser_general, battle_date, war_id, marker_route
) VALUES (
    '죽주 남하 전투',
    '몽골군이 죽주에서 청주, 대구, 경주로 남하한 침공.',
    36.64, 127.48,
    '몽골 장수', '고려 수비군',
    DATE '1237-01-01',
    (SELECT war_id FROM war WHERE name = '여몽전쟁(대몽항쟁)'),
    '{"type":"LineString","coordinates":[[127.41370943892196,37.08131615019693],[127.48372738117655,36.63737682128203],[127.69908318032178,36.423116493792314],[127.95718853608373,36.21064645901592],[128.36647452044406,35.95539023429556],[128.59437605797854,35.88420774157897],[128.93210966179467,35.833005768035726],[129.23414784406933,35.864176125391644]]}'::jsonb
) ON CONFLICT DO NOTHING;

-- 8. 추가 전투: 충주 서남 전투 (충주 청주 전주 나주)
INSERT INTO battle (
    battle_name, details, latitude, longitude,
    winner_general, loser_general, battle_date, war_id, marker_route
) VALUES (
    '충주 서남 전투',
    '몽골군의 충주에서 청주, 전주, 나주로의 서남 방향 침공.',
    36.71, 127.59,
    '몽골 장수', '고려 수비군',
    DATE '1254-01-01',
    (SELECT war_id FROM war WHERE name = '여몽전쟁(대몽항쟁)'),
    '{"type":"LineString","coordinates":[[127.93131919381034,36.96728697469413],[127.75009628444558,36.83549574992128],[127.5880939866801,36.714487296895506],[127.47414321791283,36.63076993323067],[127.39702236719513,36.37887455797606],[127.41233341659658,36.18646227977321],[127.41092695967716,35.984495029716015],[127.14870290142963,35.82207616164424],[126.95208778374575,35.42223674014667],[126.81205189923661,35.25642771920121],[126.72418624621126,35.04981289295541]]}'::jsonb
) ON CONFLICT DO NOTHING;

-- 9. 합천 전투 - "충주 상주 합천" 경로 (이미 data.sql에 있을 수 있음)
UPDATE battle
SET marker_route = '{"type":"LineString","coordinates":[[127.93555027018184,36.967294742855444],[127.9836017991801,36.826709359668996],[128.02753462569277,36.73541019428352],[128.0769590555195,36.61644854068108],[128.1154100333957,36.517175998753146],[128.166207364051,36.41114195457391],[128.20432317120483,36.192916291445385],[128.14666133640696,35.90198459516128],[128.1493985539477,35.59219480266793]]}'::jsonb
WHERE battle_name = '합천 전투';

-- 만약 합천 전투가 없다면 생성
INSERT INTO battle (
    battle_name, details, latitude, longitude,
    winner_general, loser_general, battle_date, war_id, marker_route
) VALUES (
    '합천 전투',
    '여몽연합군이 삼별초를 추격하며 합천 일대에서 벌인 전투.',
    35.56, 128.16,
    '여몽연합군', '삼별초',
    DATE '1270-08-01',
    (SELECT war_id FROM war WHERE name = '여몽전쟁(대몽항쟁)'),
    '{"type":"LineString","coordinates":[[127.93555027018184,36.967294742855444],[127.9836017991801,36.826709359668996],[128.02753462569277,36.73541019428352],[128.0769590555195,36.61644854068108],[128.1154100333957,36.517175998753146],[128.166207364051,36.41114195457391],[128.20432317120483,36.192916291445385],[128.14666133640696,35.90198459516128],[128.1493985539477,35.59219480266793]]}'::jsonb
) ON CONFLICT DO NOTHING;

-- 10. 추가 전투: 삼별초 용장 전투 (삼별초 용장 나주 전주)
INSERT INTO battle (
    battle_name, details, latitude, longitude,
    winner_general, loser_general, battle_date, war_id, marker_route
) VALUES (
    '삼별초 용장 전투',
    '삼별초가 진도 용장성에서 나주, 전주 일대로 활동.',
    34.82, 126.71,
    '삼별초', '여몽연합군',
    DATE '1271-01-01',
    (SELECT war_id FROM war WHERE name = '여몽전쟁(대몽항쟁)'),
    '{"type":"LineString","coordinates":[[126.25949883595274,34.47408718205438],[126.70981030770763,34.81756514488553],[126.74275992759215,35.04276014748851],[127.08873093637945,35.34355061750656],[127.17659658940477,35.629831029790466],[127.16012177946253,35.826056448100985]]}'::jsonb
) ON CONFLICT DO NOTHING;

-- 11. 추가 전투: 용장 상륙전 1 (용장 상륙 동래)
INSERT INTO battle (
    battle_name, details, latitude, longitude,
    winner_general, loser_general, battle_date, war_id, marker_route
) VALUES (
    '용장 상륙전 1',
    '여몽연합군의 진도 용장성 공략과 동래 방면 상륙작전.',
    34.57, 126.77,
    '여몽연합군', '삼별초',
    DATE '1271-05-01',
    (SELECT war_id FROM war WHERE name = '여몽전쟁(대몽항쟁)'),
    '{"type":"LineString","coordinates":[[126.30367669996674,34.48309921217883],[127.24823246998918,34.56909275083053],[127.28868376955711,34.83841237766662]]}'::jsonb
) ON CONFLICT DO NOTHING;

-- 12. 추가 전투: 용장 상륙전 2 (삼별초 용장 상륙 동래)
INSERT INTO battle (
    battle_name, details, latitude, longitude,
    winner_general, loser_general, battle_date, war_id, marker_route
) VALUES (
    '용장 상륙전 2',
    '삼별초 진압을 위한 여몽연합군의 추가 상륙 작전.',
    34.83, 127.55,
    '여몽연합군', '삼별초',
    DATE '1271-06-01',
    (SELECT war_id FROM war WHERE name = '여몽전쟁(대몽항쟁)'),
    '{"type":"LineString","coordinates":[[127.24886964552998,34.57082486120023],[127.82980084158173,34.83107132502204],[127.70349396535781,35.07421521252879]]}'::jsonb
) ON CONFLICT DO NOTHING;

-- 13. 추가 전투: 용장 동래 전투 (삼별초 용장 상륙 동래)
INSERT INTO battle (
    battle_name, details, latitude, longitude,
    winner_general, loser_general, battle_date, war_id, marker_route
) VALUES (
    '용장 동래 전투',
    '여몽연합군의 동래 상륙 및 삼별초 잔당 소탕전.',
    35.04, 128.63,
    '여몽연합군', '삼별초',
    DATE '1271-07-01',
    (SELECT war_id FROM war WHERE name = '여몽전쟁(대몽항쟁)'),
    '{"type":"LineString","coordinates":[[127.82271058669636,34.83820962998523],[128.39383733136108,34.90131069426013],[128.6299762738667,35.04086202246355],[128.74255414180544,35.236282733528654],[129.07800977830223,35.181483185930354]]}'::jsonb
) ON CONFLICT DO NOTHING;
